(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(6),o=a.n(c),r=a(3),l=a.n(r),m=a(7),u=a(1),i=(a(14),a(15),a(16),function(e){var t=e.select,a=e.posts,c=e.showPostInfo,o=e.postSelected,r=Object(n.useMemo)((function(){return"0"===t?a:a.filter((function(e){return e.userId===+t}))}),[t,a]);return s.a.createElement("div",{className:"PostsList"},s.a.createElement("h2",null,"Posts:"),s.a.createElement("ul",{className:"PostsList__list"},r.map((function(e){return s.a.createElement("li",{key:e.id,className:"PostsList__item"},s.a.createElement("div",null,s.a.createElement("b",null,"[User #",e.userId,"]:"),e.title),s.a.createElement("button",{type:"button",value:e.id,className:"PostsList__button button",onClick:c},+o===e.id?"Close":"Open"))}))))}),p=a(2),d=a(4),f=function(e,t){return fetch("".concat("https://mate-api.herokuapp.com","/").concat(e),t).then((function(e){return e.json()})).then((function(e){return e.data}))},b=(a(17),function(e){var t=e.postId,a=e.loadComments,c=Object(n.useState)({name:"",email:"",body:"",postId:t}),o=Object(u.a)(c,2),r=o[0],l=o[1],m=function(e,a){var n;l(Object(d.a)(Object(d.a)({},r),{},(n={},Object(p.a)(n,e,a),Object(p.a)(n,"postId",t),n)))};return s.a.createElement("form",{className:"NewCommentForm",onSubmit:function(e){var t;e.preventDefault(),(t=r,f("comments",{method:"POST",body:JSON.stringify(t)})).then(a),l({name:"",email:"",body:""})}},s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{value:r.name,onChange:function(e){var t=e.target;return m(t.name,t.value)},type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input"})),s.a.createElement("div",{className:"form-field"},s.a.createElement("input",{value:r.email,onChange:function(e){var t=e.target;return m(t.name,t.value)},type:"email",name:"email",placeholder:"Your email",className:"NewCommentForm__input"})),s.a.createElement("div",{className:"form-field"},s.a.createElement("textarea",{value:r.body,onChange:function(e){var t=e.target;return m(t.name,t.value)},name:"body",placeholder:"Type comment here",className:"NewCommentForm__input"})),s.a.createElement("button",{type:"submit",className:"NewCommentForm__submit-button button"},"Add a comment"))}),E=(a(18),function(e){var t=e.title,a=e.postId,c=e.comments,o=e.loadComments,r=Object(n.useState)(!0),l=Object(u.a)(r,2),m=l[0],i=l[1];return s.a.createElement("div",{className:"PostDetails"},""!==a?s.a.createElement(s.a.Fragment,null,s.a.createElement("h2",null,"Post details:"),s.a.createElement("section",{className:"PostDetails__post"},s.a.createElement("p",null,t)),s.a.createElement("section",{className:"PostDetails__comments"},c.length>0&&s.a.createElement("button",{type:"button",className:"button",onClick:function(){return i(!m)}},"".concat(m?"Hide":"Show"," ").concat(c.length," comments")),m&&s.a.createElement("ul",{className:"PostDetails__list"},c.map((function(e){return s.a.createElement("li",{key:e.id,className:"PostDetails__list-item"},s.a.createElement("button",{type:"button",className:"PostDetails__remove-button button",onClick:function(){return(t=e.id,f("comments/".concat(t),{method:"DELETE"})).then(o("comments"));var t},value:e.id},"X"),s.a.createElement("p",null,e.body))})))),s.a.createElement("section",null,s.a.createElement("div",{className:"PostDetails__form-wrapper"},s.a.createElement(b,{postId:a,loadComments:[o("comments")]})))):s.a.createElement("h2",null,"Please select a post in left column!!!"))});E.defaultProps={title:""};var v=function(){var e=Object(n.useState)("0"),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),r=Object(u.a)(o,2),p=r[0],d=r[1],b=Object(n.useState)([]),v=Object(u.a)(b,2),_=v[0],h=v[1],N=Object(n.useState)([]),O=Object(u.a)(N,2),j=O[0],y=O[1],P=Object(n.useState)(""),C=Object(u.a)(P,2),g=C[0],S=C[1],k=function(){var e=Object(m.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t);case 2:a=e.sent,e.t0=t,e.next="posts"===e.t0?6:"users"===e.t0?8:10;break;case 6:return h(a),e.abrupt("break",11);case 8:return d(a),e.abrupt("break",11);case 10:y(a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){k("posts"),k("users"),k("comments")}),[]);var w=_.find((function(e){return e.id===+g})),I=j.filter((function(e){return e.postId===+g}));return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App__header"},s.a.createElement("label",null,"Select a user: \xa0",s.a.createElement("select",{className:"App__user-selector",value:a,onChange:function(e){return c(e.target.value)}},s.a.createElement("option",{value:"0"},"All users"),p.map((function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.name)}))))),s.a.createElement("main",{className:"App__main"},s.a.createElement("div",{className:"App__sidebar"},s.a.createElement(i,{select:a,posts:_,showPostInfo:function(e){e.target.value===g?S(""):S(e.target.value)},postSelected:g})),s.a.createElement("div",{className:"App__content"},s.a.createElement(E,Object.assign({postId:g},w,{comments:I,loadComments:k})))))};o.a.render(s.a.createElement(v,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.57cf9d53.chunk.js.map